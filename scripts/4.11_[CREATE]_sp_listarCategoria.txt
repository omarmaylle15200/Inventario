DELIMITER //
create PROCEDURE sp_listarCategoria(
                                  in v_nombre varchar(50),
                                  in v_fechaInicio date,
                                  in v_fechaFin date)
BEGIN
	
    select 
    	c.IdCategoria,
        ifnull(c.Codigo,'') Codigo,
        ifnull(c.Nombre,'') Nombre,
        ifnull(c.Descripcion,'') Descripcion,
        ifnull(c.EsActivo,0) EsActivo,
        ifnull(c.IdUsuarioRegistro,0) IdUsuarioRegistro,
        ifnull(c.IdUsuarioModificacion,0) IdUsuarioModificacion,
        c.FechaRegistro,
        c.FechaModificacion
    from categoria c 
    where 
    c.Nombre=if(ifnull(v_nombre,'')='',c.Nombre,v_nombre)
    and CONVERT(c.FechaRegistro, DATE) BETWEEN v_fechaInicio and v_fechaFin;
    
END //